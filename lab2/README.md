# Лабораторная работа №2: Pipelines

## Описание

В папке `lab2` реализован pipeline на тематике:

- обработка заказа (`OrderContext`);
- валидация пользователя (`UserContext`).

Основная идея: pipeline состоит из шагов, которые выполняются последовательно над контекстом.

## Что реализовано

- Обобщённый pipeline:
  - `Pipeline[TContext]`
  - `PipelineStep[TContext]` (через `Protocol`)
- 2 разных контекста:
  - `OrderContext`
  - `UserContext`
- Демонстрация работы в `main()` для обоих контекстов.
- Декораторы шагов:
  - `LoggingDecorator` (код до и после шага)
  - `TimeMeasureDecorator` (замер времени выполнения шага)
- Режим Responsibility Chain:
  - если у контекста `is_done == True`, выполнение следующих шагов останавливается.
- Базовая интроспекция:
  - проверка наличия поля `is_done` через `hasattr/getattr`.

## Что из дополнительных пунктов пока не сделано

- Расширенная интроспекция с накоплением описания шагов (например, через `StringBuilder`-аналог).
- Вспомогательные функции на базе интроспекции (например, печать списка шагов).
- Высокоуровневые операции управления шагами:
  - `ReplaceFirstInstance`
  - `ReplaceAll`
  - `WrapAll`
  - `MoveTo`
- Singleton для переиспользования step-ов без состояния.
- Unit tests.
- Явная реализация Visitor и Adapter (в текущем коде не выделены как отдельные объекты/интерфейсы).

## Структура

- `main.py`:
  - интерфейс шага и pipeline;
  - контексты;
  - шаги для заказа и пользователя;
  - декораторы шагов;
  - демонстрационный запуск.

## Как запускать

### Требования

- Python 3.10+.

### Запуск

Из корня проекта:

```powershell
python lab2/main.py
```

Или из папки `lab2`:

```powershell
python main.py
```

## Что выводится при запуске

Скрипт показывает:

1. Выполнение pipeline для заказа.
2. Логи декоратора и время выполнения шага.
3. Итоговую сумму заказа после скидки.
4. Выполнение pipeline для пользователя и результат валидации.

