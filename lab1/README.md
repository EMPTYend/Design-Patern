# Лабораторная работа №1: Field Mask

## Что реализовано

В папке `lab1` реализована предметная модель товара и работа с масками полей:

- `Product` (domain model) с 5 полями:
  - `id: int`
  - `name: str`
  - `price: float`
  - `category: ProductCategory` (`enum`)
  - `manufacturer: str`
- Репозиторий `ProductRepository` с хранением объектов в списке (in-memory "база данных").
- Поиск по имени: `find_by_name(name)`.
- Полевая маска на битах (`IntFlag`): `ProductFields` + обёртка `FieldMaskBits`.
- Печать только выбранных полей: `FieldMaskBits.print_fields(obj, mask)`.

Дополнительно реализовано:

- `merge_by_mask(mask)` — удаляет дубликаты по выбранным полям.
- `copy_data(source, equal_mask, copy_mask)` — копирует выбранные поля из `source` в объекты, совпадающие по `equal_mask`.

## Структура файлов

- `models.py` — `ProductCategory`, `Product`.
- `field_mask.py` — битовая маска полей и операции:
  - `are_equal(a, b, mask)`
  - `copy_fields(src, dst, mask)`
  - `print_fields(obj, mask)`
- `database.py` — репозиторий и методы работы с коллекцией.
- `main.py` — демонстрационный сценарий:
  1. добавление данных;
  2. поиск по имени;
  3. merge по маске (`NAME | CATEGORY`);
  4. копирование `PRICE` по маске равенства (`NAME | CATEGORY`).

## Как это работает

### 1) Битовая маска полей

`ProductFields` задаёт поля как флаги (`ID`, `NAME`, `PRICE`, `CATEGORY`, `MANUFACTURER`).
Комбинации делаются через `|`, например:

```python
ProductFields.NAME | ProductFields.CATEGORY
```

Это позволяет:

- сравнивать объекты только по нужным полям;
- копировать только выбранные поля;
- печатать только нужные поля.

### 2) Поиск

`find_by_name` возвращает список товаров с совпадающим `name` (без учёта регистра).

### 3) Merge по маске

`merge_by_mask` проходит по всем объектам и оставляет только первый объект из каждой группы равных по маске.

### 4) Копирование по маскам

`copy_data`:

- сначала проверяет равенство объекта и `source` по `equal_mask`;
- если равны — копирует в него поля из `source`, указанные в `copy_mask`.

## Запуск

### Требования

- Python 3.10+ (рекомендуется 3.11+).

### Команда запуска

Из корня проекта:

```powershell
python lab1/main.py
```

Или из папки `lab1`:

```powershell
python main.py
```

## Ожидаемый результат

Скрипт выводит в консоль:

1. Результат `FindByName('Laptop')`.
2. Состояние после `merge` по маске `Name + Category`.
3. Состояние после копирования поля `price` из источника в совпадающие товары.

## Краткое соответствие заданию

- Domain model с нужными типами: выполнено.
- Абстракция базы данных: выполнено.
- Маска полей: выполнено (в битовом виде).
- Поиск по одному полю: выполнено.
- Печать по маске: выполнено.
- Тестовый сценарий запуска: выполнено в `main.py`.

